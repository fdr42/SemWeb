# General description
The aim of this project is to do a website that provide bikes stations informations and some other informations linked to this bikes stations using the principles semantic web. Follow this [link](https://en.wikipedia.org/wiki/Semantic_Web) to learn more about semantic web.

# How to setup ?
## Jena database 
Follow this [link](https://jena.apache.org/download/index.cgi) to install Apache Jena Fuseki

When Fuseki server is lauched there is differents steps to insert the data :

1. Create a dataset called **semwebproject** using menu *manage dataset / add new dataset*. Warning ! the name of the dataset is very important,
2. Upload data with TTL files generated by SPARQL-Generate (find requests in **Données/RequetesVilles**.


Apache Jena Fuseki provides interface to import RDF file and automatically insert it in the server.
## Running web server
To run the project, you can use the command :

**java -jar SemWebProject-0.0.1-SNAPSHOT.jar**

If you want to compile sources run 
*mvn clean package* in **sources/SemWebProject/**

To import project import pom.xml has maven project in your IDE.

## See the result 
Go to http://localhost:8080/ to test the application.


# Semantic web technologies
## SPARQL-Generate
### Description
Follow this [link](https://ci.mines-stetienne.fr/sparql-generate/) to learn more about SPARQL-Generate
##  Bike request
We used SPARQL-Generate to build RDF representation of bikes stations from originals API that provides the data in JSON format. We used 3 differents API of bikes stations :

* First, we used [JCDecaux](https://developer.jcdecaux.com/#/opendata/vls?page=getstarted) API that provides very much stations around the world in JSON format,
* Second, we used [Saint-Étienne](https://saint-etienne-gbfs.klervi.net/gbfs/en/station_information.json) API that provides all bikes stations of Saint-Étienne city,
* Last, we used [Rennes](https://data.rennesmetropole.fr/api/records/1.0/search/?dataset=etat-des-stations-le-velo-star-en-temps-reel) API that provides all bikes stations of Saint-Étienne city.

So we built 3 requests for SPARQL-Generate that you can find in **Données/RequetesVilles** folder. Using SPARQL-Generate, this 3 requests generate RDF that have the same format for Saint-Étienne, Rennes and the other city from JCDecaux.


# Apache Jena Fuseki
## Description
Follow this [link](https://jena.apache.org/index.html) to learn more about Apache Jena Fuseki

## Where in code
* First there is a controller that load all the stations from Apache Jena Fuseki (**in controller/StationListController.java**). 
	* The request is done using Apache jena (see pom.xml).
* Second there is a rest controller that request [Wikidata](https://www.wikidata.org/wiki/Wikidata:Main_Page) to find important place near a station 
(**in restController/ProximityListController.java**).
	* Like the first controller, the request is done using Apache jena (see pom.xml).

## RDFa
  
We have integrated **RDFa** technology into html pages to facilitate data extraction. We made sure that all information of all the stations could be extracted via the source code of the main page, or each station individually via the station details popup.
# Other technologies used
## Spring boot
We use [Spring boot](https://spring.io/projects/spring-boot) to do the backend of our web site.
## Thymeleaf
We use [Thymeleaf](https://www.thymeleaf.org/) to get data of stations from the controller to the view.
## Axios
We use [Axios](https://github.com/axios/axios) for the dynamic data :
* To get the number of available bikes in a station requesting directly the original API. (in **resources/initMap.js** calling **restController/AvailableRestController.java**)
* To request our REST controller to get important places near the stations. ( in **resources/initMap.js** calling **restController/ProximityeRestController.java**)

## Leaflet with openstreetmap
We use [Leaflet](https://leafletjs.com/) with open [OpenStreetMap](https://www.openstreetmap.fr/) to provide a two maps :
* The first map shows all the stations from our Fuseki dataset. Stations are represented by markers. When we click on  marker, there is a modal that provide the second map.
* The second map shows the selected bike station (in blue) and near important places (in red)

## Datatables
We use [DataTables](https://datatables.net/) to provide a table that can be sorted et that provide a search bar.

# Who did what ?

We have often worked together, but but we can express the division of labor like this :

|                |Didier-Roche François    |Gentile Pierre                       |
|----------------|-------------------------|--------------|
|Sparql-generate request         |  70%    |      30%     |
|Sparql request for station list |  20%    |      80%     |
|Sparql request for nearby items |  80%    |      20%     |
| RDFa  in HTML pages            |  50%    |      50%     |
| Other Web developpment         |  40%    |      60%     |


